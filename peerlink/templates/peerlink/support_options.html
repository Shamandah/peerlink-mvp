<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Choose your support Â· PeerLink</title>
    <style>
        /* === base & layout â€” calm, professional, refined from previous version === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: #f0f4fa;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
        }

        .container {
            max-width: 620px;
            width: 100%;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* card style â€“ calm, elevated (shared by both cards) */
        .card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            border-radius: 32px;
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.15), 0 4px 18px rgba(0, 0, 0, 0.03);
            padding: 2.2rem 2rem;
        }

        /* --- first card: dynamic resource (unchanged from your previous update) --- */
        .reason-tag {
            display: inline-block;
            background: #e9effa;
            color: #2c3e6d;
            font-weight: 500;
            font-size: 0.75rem;
            padding: 0.3rem 1.2rem;
            border-radius: 40px;
            letter-spacing: 0.3px;
            text-transform: uppercase;
            border: 1px solid #cfdeff;
            margin-bottom: 1rem;
            box-shadow: inset 0 1px 3px white;
        }

        h2 {
            font-size: 1.8rem;
            font-weight: 500;
            line-height: 1.3;
            color: #0b1f3a;
            margin-bottom: 1.4rem;
            letter-spacing: -0.02em;
        }

        ul {
            list-style: none;
            padding: 0;
            margin: 0 0 1.8rem 0;
        }

        li {
            margin-bottom: 0.9rem;
            padding-left: 2rem;
            position: relative;
            color: #253c5c;
            font-size: 1rem;
            line-height: 1.5;
            font-weight: 380;
        }

        li::before {
            content: "âœ¦";
            position: absolute;
            left: 0;
            color: #4f46e5;
            font-weight: 500;
            font-size: 1.2rem;
        }

        .exercise {
            background: #edf2fa;
            border-radius: 24px;
            padding: 1.4rem 1.8rem;
            border-left: 6px solid #4f46e5;
            color: #1d2e4a;
            font-size: 1rem;
            line-height: 1.6;
            font-style: normal;
            box-shadow: inset 0 1px 4px rgba(255,255,255,0.8), 0 6px 12px -10px #1e293b;
            margin-top: 0.5rem;
        }

        .exercise strong {
            color: #2f4172;
            font-weight: 540;
            display: inline-block;
            margin-bottom: 0.2rem;
        }

        /* --- second card: connection options (replaces waiting / spinner) --- */
        .options-card {
            text-align: left;
            background: rgba(255, 255, 255, 0.9);
        }

        .options-card h3 {
            font-size: 1.4rem;
            font-weight: 500;
            color: #0b1f3a;
            margin-bottom: 0.25rem;
            letter-spacing: -0.01em;
        }

        .subhead {
            color: #475569;
            font-size: 0.95rem;
            margin-bottom: 1.8rem;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 0.75rem;
        }

        /* option buttons â€” inspired by the "professional icons" design, integrated */
        .option-btn {
            display: block;
            width: 100%;
            padding: 1rem 1rem 1rem 3.5rem;
            margin: 1rem 0;
            border: none;
            border-radius: 20px;
            font-size: 1.05rem;
            font-weight: 500;
            cursor: pointer;
            text-align: left;
            position: relative;
            transition: background 0.15s, box-shadow 0.15s, transform 0.1s;
            background: #f8fafc;
            color: #1e293b;
            border: 1px solid #e2e8f0;
        }

        .enabled-btn {
            background: #4f46e5;
            color: white;
            border: none;
            box-shadow: 0 8px 18px -8px rgba(79, 70, 229, 0.5);
        }

        .enabled-btn:hover {
            background: #4338ca;
            transform: scale(1.01);
            box-shadow: 0 12px 22px -10px #4f46e5;
        }

        .disabled-btn {
            background: #f1f5f9;
            color: #94a3b8;
            cursor: not-allowed;
            border: 1px solid #dae2ec;
        }

        /* icon container (same as professional style) */
        .icon {
            position: absolute;
            left: 1.2rem;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
        }

        .icon svg {
            width: 1.5rem;
            height: 1.5rem;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .disabled-btn .icon {
            color: #94a3b8;
        }

        .enabled-btn .icon {
            color: white;
        }

        /* confidentiality footer (blended) */
        .footer-note {
            margin-top: 2rem;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            color: #556b89;
            border-top: 1px dashed #c0d0e5;
            padding-top: 1.5rem;
        }

        .footer-note svg {
            width: 18px;
            height: 18px;
            stroke: #3e5a7c;
            stroke-width: 1.8;
            fill: none;
        }

        a.option-btn {
            text-decoration: none;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- CARD 1: Dynamic psychoeducation (exactly as before â€” based on reason) -->
        <div class="card">
            <span class="reason-tag">{{ request.get_reason_display }}</span>
            <h2>{{ resource.title }}</h2>
            <ul>
                {% for tip in resource.tips %}
                    <li>{{ tip }}</li>
                {% endfor %}
            </ul>
            <div class="exercise">
                <strong>ðŸ§˜ grounding exercise</strong><br>
                {{ resource.exercise }}
            </div>
        </div>

        <!-- CARD 2: CONNECTION OPTIONS (replaces waiting spinner) -->
        <div class="card options-card">
            <h3>How would you like to connect?</h3>
            <div class="subhead">choose a support channel â€” all anonymous</div>
            
            <!-- âœ… ENABLED: Text Chat (professional chat) -->
            <a href="{% url 'peerlink:chat_session' request.id %}" class="option-btn enabled-btn">
                <span class="icon">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                        <circle cx="9" cy="10" r="1" fill="currentColor" stroke="none"/>
                        <circle cx="15" cy="10" r="1" fill="currentColor" stroke="none"/>
                        <circle cx="12" cy="10" r="1" fill="currentColor" stroke="none"/>
                    </svg>
                </span>
                Text Chat (Recommended)
            </a>

            <!-- âŒ DISABLED: Audio Call (professional microphone) -->
            <button class="option-btn disabled-btn" disabled>
                <span class="icon">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z" />
                        <line x1="5" y1="10" x2="5" y2="12" />
                        <line x1="19" y1="10" x2="19" y2="12" />
                        <path d="M19 12a7 7 0 0 1-14 0" />
                    </svg>
                </span>
                Audio Call (Coming Soon)
            </button>

            <!-- âŒ DISABLED: Video Call (professional video camera) -->
            <button class="option-btn disabled-btn" disabled>
                <span class="icon">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <rect x="2" y="6" width="16" height="12" rx="2" ry="2" />
                        <polygon points="23 8 18 12 23 16 23 8" />
                    </svg>
                </span>
                Video Call (Coming Soon)
            </button>

            <!-- âŒ DISABLED: AI Helper (robot style) -->
            <button class="option-btn disabled-btn" disabled>
                <span cl=ass="icon">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <rect x="9" y="2" width="6" height="6" rx="1" ry="1" />
                        <path d="M6 8h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2z" />
                        <circle cx="9" cy="14" r="1" fill="currentColor" stroke="none" />
                        <circle cx="15" cy="14" r="1" fill="currentColor" stroke="none" />
                    </svg>
                </span>
                AI Helper (For Quick Tips)
            </button>

            <!-- confidentiality footer (matches the style of first card but inside second card) -->
            <div class="footer-note">
                <svg viewBox="0 0 24 24">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" fill="#e9effa" />
                    <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" fill="none" />
                </svg>
                <span>All sessions are anonymous and confidential.</span>
            </div>
        </div>
    </div>
</body>
</html>